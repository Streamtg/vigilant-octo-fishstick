name: Ejecutar bot urlarriba (con variables explícitas)

on:
  workflow_dispatch:

jobs:
  run-bot:
    runs-on: ubuntu-latest

    steps:
      - name: Clonar repo desde GitLab
        run: git clone https://gitlab.com/none342/urlarriba.git

      - name: Instalar Python y dependencias
        run: |
          sudo apt-get update
          sudo apt-get install -y python3-pip
          cd urlarriba
          pip3 install --upgrade pip
          pip3 install -r requirements.txt

      - name: Ejecutar bot con variables de entorno explícitas
        run: |
          cd urlarriba
          API_ID=${{ secrets.API_ID }} \
          API_HASH=${{ secrets.API_HASH }} \
          BOT_TOKEN=${{ secrets.BOT_TOKEN }} \
          OWNER_ID=${{ secrets.OWNER_ID }} \
          CHANNEL_ID=${{ secrets.CHANNEL_ID }} \
          python3 bot.py
