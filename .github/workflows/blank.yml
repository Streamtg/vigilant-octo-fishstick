name: Ejecutar bot urlarriba (sin tmux, sin .env)

on:
  workflow_dispatch:

jobs:
  run-bot:
    runs-on: ubuntu-latest

    steps:
      - name: 🔄 Clonar repo desde GitLab
        run: |
          git clone https://gitlab.com/none342/urlarriba.git

      - name: 🐍 Configurar Python e instalar dependencias
        run: |
          sudo apt-get update
          sudo apt-get install -y python3-pip
          cd urlarriba
          pip3 install --upgrade pip
          pip3 install -r requirements.txt

      - name: 🚀 Ejecutar el bot con variables desde Secrets
        env:
          API_ID: ${{ secrets.API_ID }}
          API_HASH: ${{ secrets.API_HASH }}
          BOT_TOKEN: ${{ secrets.BOT_TOKEN }}
          OWNER_ID: ${{ secrets.OWNER_ID }}
          CHANNEL_ID: ${{ secrets.CHANNEL_ID }}
        run: |
          cd urlarriba
          python3 bot.py
