name: hjkhlljnljjj
on:
  schedule:
    - cron: '0 */6 * * *'
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    strategy:
      max-parallel: 1
      fail-fast: false
      matrix:
        go: [1.0]
        flag: [A]
    timeout-minutes: 360
    env:
      NUM_JOBS: 900
      JOB: ${{ matrix.go }}
    steps:
    - name: Checkout repository
      uses: actions/checkout@v2

    - name: Set up Python
      uses: actions/setup-python@v2
      with:
        python-version: '3.x'

    - name: Install dependencies
      run: |
        sudo docker run -d -p 8080:8080 -v data:/data --name webtor --restart=always ghcr.io/webtor-io/self-hosted:main
        curl -sSL https://ngrok-agent.s3.amazonaws.com/ngrok.asc \
        | sudo tee /etc/apt/trusted.gpg.d/ngrok.asc >/dev/null \
        && echo "deb https://ngrok-agent.s3.amazonaws.com buster main" \
        | sudo tee /etc/apt/sources.list.d/ngrok.list \
        && sudo apt update \
        && sudo apt install ngrok
        ngrok config add-authtoken 2Q1BLdavtAKsZku6Zn0eYOdefha_7jwGNXAairQ3cDTeqtS3d
        ngrok http --url=ready-unlikely-osprey.ngrok-free.app 8080
        docker run -e DOMAIN=ready-unlikely-osprey.ngrok-free.app -d -p 8080:8080 -v data:/data --name webtor --restart=always ghcr.io/webtor-io/self-hosted:main
